<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>è‡ªé€‚åº”å¸ƒå±€test</title>
    <script src="../static/js/flexible.js"></script>
    <script src="../static/js/jquery.min.js"></script>
    <script type="text/javascript" src="../static/js/echarts.min.js"></script>
    <script type="text/javascript" src="https://www.guanacossj.com/static/js/echarts-wordcloud.min.js"></script>
    <script type="text/javascript" src="../static/js/china.js"></script>
    <link rel="stylesheet" href="../static/css/è‡ªé€‚åº”test_1.css">
    <script>console.log('â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—\nâ–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—                                                 \nâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘                                                 \nâ–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘                                                 \nâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘                                                 \nâ•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•šâ•â•  â•šâ•â•                                                 \n                                                                                                     \nâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—\nâ–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—        â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘\nâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘\nâ–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘\nâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘\nâ•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•šâ•â•     â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•   â•šâ•â•   â•šâ•â•â•â•â•â•â•â•šâ•â•     â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•     â•šâ•â•')</script>
    <script type="text/javascript" src="../static/js/artificial_js/_key.js" enc="vigenerecipher"></script>
    <script>
        console.log('')
        console.log(`ã€å½©è›‹ğŸªã€‘å‰åç«¯æºç (éœ€ç ´è§£å¯†æ–‡XD):
dGhiYmc6Ly9vdWhwZ3Aua2FhL3dzd3dlL2pxZWlpeHdobWhxYWItSlBxaWRzbWQ=`)
    </script>

</head>
<body>
    <div class="viewport">
        <div class="column count_1">
            <div class="chart inner 1_map" style="height:5rem"></div>
            <div class="chart inner 1_bar" style="height:4rem"></div>
            <div class="chart inner 1_word" style="height:2.875rem"></div>
        </div>
        <div class="column count_2">
            <div id="main" class="inner 1_map" style="height:6.25rem;"></div>
            <div class="chart inner 2_bar" style="height:4.5rem"></div>
        </div>
        <div class="column count_3">
            <!-- <div class="chart inner" style="height:2.875rem"></div> -->
            <div class="chart inner" style="height:7.875rem"></div>
            <div class="chart inner" style="height:4rem"></div>
        </div>
    </div>
    <div class="select">
        <a href="../test2/">äººå·¥æ™ºèƒ½</a>
        <a>å¤§æ•°æ®åˆ†æ</a>
        <a>å¤§æ•°æ®å¼€å‘</a>
        <a>æ•°æ®åº“å·¥ç¨‹å¸ˆ</a>
        <a>å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆ</a>
    </div>
    <button id="select">â©º</button>


    <script>
        // å¼‚æ­¥å®ç°ä½¿ç”¨çš„æ˜¯ajaxã€‚
        function getChartClass(str) {
            str = str.replace('chart', '').replace(/ /g, '').replace('inner', '');
            return str;
        }
        // å®ç°è¯·æ±‚ä¸åç«¯è¿”å›æ•°æ®çš„å‰æï¼š
        // åœ¨ class å±æ€§æ·»åŠ  'chart' ç”¨ä»¥å®šä½æ‰€æœ‰å›¾è¡¨æ¡†
        // åœ¨ python ä¸­çš„å­—å…¸æ·»åŠ å¯¹åº” class æ‰€å¯¹åº”çš„ç”»å›¾æ–¹æ³•ï¼Œä¾‹å¦‚ç¬¬ä¸€å¼ åœ°å›¾çš„classä¸º'1_map'ï¼Œå¯¹åº”pythonä¸­è‡ªå®šä¹‰å­—å…¸é‡Œçš„charts.mapsæ–¹æ³•

        // .each()å¾ªç¯æ‰¾åˆ°æ‰€æœ‰éœ€è¦è¯·æ±‚çš„å›¾ï¼ˆå›¾çš„éœ€æ±‚åœ¨classé‡Œï¼‰é›†åˆåœ¨ä¸€ä¸ªæ•°ç»„é‡Œ
        var charts=[];
        $('.chart').each(function(index,ele){
            charts.push(getChartClass(ele.getAttribute('class')));
        });
        var options = {};

        // eachéå†ä¸Šé¢å®šä¹‰çš„æ•°ç»„(indexå‚æ•°ä¸ºæ•°ç»„å†…å•ä¸ªæ•°æ®çš„ç´¢å¼•å€¼ï¼Œeleä¸ºæ•°ç»„å†…å•ä¸ªæ•°æ®)
        // ç”¨eachçš„åŸå› æ˜¯æ–¹ä¾¿ã€‚æ¯ä¸ªå›¾éƒ½ä¸“é—¨å†™ä¸€ä¸²å¯¹åº”çš„ajaxè¯·æ±‚ä¼šåœ¨ åæœŸç»´æŠ¤æ›´æ”¹æˆ–è€…å›¾å¾ˆå¤š çš„æƒ…å†µä¸‹åŠ å¤§ä»£ç å¤æ‚åº¦
        // é’ˆå¯¹æ¯ä¸ªéœ€æ±‚è¿›è¡Œå¯¹åº”å›¾çš„è¯·æ±‚(ajaxè¯·æ±‚)

        // ç®€å•çš„ç†è§£(ä¸‹é¢ä¸€è¡Œä¸ºé¢å‘ç”¨æˆ·çš„æ³¨é‡Šï¼Œå…·ä½“å®ç°æ–¹æ³•åœ¨ä¸Šé¢çš„ä¸‰æ®µæ³¨é‡Šä¸­):
        // å¯ä»¥ç†è§£ä¸ºå›¾çš„ä¸»è¦è¯·æ±‚å‚æ•°æ¥å£åœ¨htmlä¸­classä¸ºchartçš„ dom å†…ï¼Œåœ¨domçš„classå†…è®¾ç½®æ‰€éœ€å›¾çš„å‚æ•°ï¼Œä¾‹å¦‚ 1_map
        $.each(charts,function(index,ele){
            $.get(
                'http://127.0.0.1:8337/chart',
                {
                    chart: ele.split('_')[1],
                    num: ele.split('_')[0],
                },
                function (data) {

                    // if ä»¥åŠ if å†…çš„æ–¹æ³•ç”¨äºè§£å†³å›¾çš„æ¸å˜è®¾ç½®é—®é¢˜
                    if (ele in {'2_bar':''}){

                        // å…·ä½“è§£é‡Šï¼šåç«¯ç”»å›¾åä¼ å…¥çš„æ˜¯ json æ–‡ä»¶ï¼Œä½†æ˜¯jsoné‡Œ js å¯¹è±¡çš„åˆ›å»ºåœ¨pythoné‡Œä¸èƒ½ç›´æ¥å®ç°
                        // éœ€è¦ç”¨ä¸€ä¸ªç±»è¿›è¡Œä¼ é€’(pyechartsè‡ªå¸¦çš„JsCodeç±»å¯ä»¥è¿›è¡Œä¼ é€’)ï¼Œä½†æ˜¯è¿™ä¸ªç±»ç”¨jsonä¼ é€’ä¸å‰ç«¯è§£æçš„æ—¶å€™å¹¶ä¸ä¼šè¢«è§£æä¸ºä¸€ä¸ªjså¯¹è±¡ï¼Œè€Œåªæ˜¯ç®€å•çš„å­—ç¬¦ä¸²
                        // æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è¿›è¡Œè°ƒæ•´ï¼ŒæŠŠå­—ç¬¦ä¸²ä»£ç å˜ä¸ºå®ä¾‹å¯¹è±¡ã€‚è¿™é‡Œä½¿ç”¨çš„ç®€å•çš„ eval è¿›è¡Œè½¬æ¢ (å¬è¯´ç”¨è¿™ä¸ªå‡½æ•°å¾ˆå®¹æ˜“è¢«ç½‘ç»œæ”»å‡»ï¼Œä¸è¿‡åº”è¯¥æ²¡äººä¼šè¿™ä¹ˆæ— èŠæ”»å‡»å’±è¿™ä¸ª)
                        data.series[0].itemStyle.normal.color = eval(data.series[0].itemStyle.normal.color);
                    };

                    // init åˆ›å»ºå®ä¾‹åŒ–å¯¹è±¡ï¼Œç”¨ jq è¿›è¡Œé€‰å–ã€‚éœ€è¦æ³¨æ„çš„æ˜¯jqé€‰å–ä¸‹æ¥çš„æ˜¯jqæ•°ç»„å¯¹è±¡ï¼Œå¹¶éç›´æ¥çš„ dom å¯¹è±¡
                    // setOption å†…ä¼ å…¥çš„ data æ˜¯è¯·æ±‚æˆåŠŸåï¼Œåç«¯ä¼ å…¥çš„jsonæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹æ˜¯å›¾çš„è®¾ç½®ï¼ŒåŒ…å«ç”»å›¾ç”¨åˆ°çš„æ•°æ®ã€‚
                    options[ele]=data;
                    echarts.init($('.'+ele)[0], 'white', { renderer: 'canvas' }).setOption(data);

                    // ä¸‹é¢çš„è¯­å¥ä¸»è¦ç›®æ ‡ä¸ºå®ç°ç‚¹å‡»åˆ‡æ¢å›¾åˆ°å¤§æ¡†å†…
                    // æŠŠè¿™æ®µä»£ç å†™åœ¨è¿™é‡Œçš„ åŸå›  ä»¥åŠ å‰æƒ…æè¦:
                    
                    // æ–¹æ³•çš„å®šä¹‰ä¹Ÿæœ‰ç€è®°å¿†æ€§,æ–¹æ³•å†…çš„å†…å®¹ä¸€æ—¦è¢«å®šä¹‰,è°ƒç”¨æ–¹æ³•çš„æ—¶å€™æ–¹æ³•å†…çš„å†…å®¹ (åŒ…å«jqé€‰æ‹©å™¨) å¹¶ä¸ä¼šæ ¹æ®å®é™…å†…å®¹çš„æ›´æ–°è¿›è¡Œæ›´æ–°
                    // ä¹Ÿå³å¼‚æ­¥åŠ è½½å®Œæˆå‰å®šä¹‰æ–¹æ³•ä¼šè¿è¡Œæ–¹æ³•å†…çš„ jqé€‰æ‹©å™¨
                    // å¼‚æ­¥åŠ è½½å®Œæˆå,è°ƒç”¨è¿™ä¸ªæ–¹æ³•å†…çš„jqé€‰æ‹©å™¨é€‰æ‹©ä¸‹æ¥çš„ å†…å®¹ å¹¶ä¸ä¼šæ›´æ–°
                    // åœ¨æœ¬æ¬¡çš„åŠŸèƒ½å®ç°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨canvasæ ‡ç­¾è¿›è¡Œç‚¹å‡»çš„è·å–(canvasè¦†ç›–äº†divï¼Œåœ¨æœ€ä¸Šå±‚ï¼Œä¹Ÿå°±æ˜¯ç‚¹ä¸åˆ°ä»–åŸå§‹çš„div)
                    // ä½†æ˜¯canvasæ˜¯åœ¨è¯·æ±‚å›¾ä¹‹åè‡ªåŠ¨åˆ›å»ºçš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨å¼‚æ­¥è¿”å›æ•°æ®ä¹‹åå†å®šä¹‰ç‚¹å‡»äº‹ä»¶
                    // **å¦‚æœ åŸç”Ÿjs çš„domé€‰å–ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜é‚£æˆ‘å°±æˆå†¤å¤§å¤´äº†(æ²¡è¯•è¿‡)**

                    // whileå¾ªç¯ä¸è¡Œï¼Œä¼šä¸€ç›´åœ¨å¾ªç¯é‡Œè¿è¡Œï¼Œé˜»å¡å¼‚æ­¥è¯·æ±‚è¿”å›çš„æ•°æ®
                    // $.when()ä¸é€‚ç”¨äºè¿™é‡Œç”¨$.each()å¾ªç¯å¼‚æ­¥è¯·æ±‚çš„ä»£ç (ä½¿ç”¨çš„è¯åªä¼šåœ¨å¾ªç¯ç»“æŸä¹‹åå°±å®šä¹‰æ–¹æ³•ï¼Œå¹¶ä¸ä¼šç­‰å¾…å¼‚æ­¥è¿”å›æ•°æ®)
                    
                    // if ç”¨äºåˆ¤æ–­ç”»çš„å›¾æ˜¯å¦ä¸ºæœ€åä¸€ä¸ªï¼Œé˜²æ­¢å¤šæ¬¡è¯·æ±‚å¤šæ¬¡å®šä¹‰æ–¹æ³•æµªè´¹èµ„æºä¸æ—¶é—´ï¼Œç”¨é‡Œé¢çš„å‚æ•°æ§åˆ¶
                    if ($('canvas').length==4){
                        $('canvas').click(function () {
                            var ele= getChartClass(this.parentNode.parentNode.getAttribute('class'));
                           
                            // ä¸»æ¡†ä½¿ç”¨ id å±æ€§è¿›è¡Œå®šä½ä¸” class ä¸­ä¸åŒ…å«chartå±æ€§(åé¢å•ç‹¬ç”»å›¾)
                            // åœ¨è¿›è¡Œå†…å®¹çš„æ·»åŠ ä¸æ›´æ¢ä¹‹å‰éœ€è¦è¿›è¡Œå†…å®¹æ¸…é™¤ï¼Œä¸ç„¶echartsçš„optionä¼šé‡å ï¼Œå›¾ä¼šå˜å¾—å¾ˆå¥‡æ€ª
                            echarts.init($('#main')[0]).clear();
                            $('#main')[0].innerHTML = '';
                            $('#main').attr('_echarts_instance_', '');
                            echarts.init($('#main')[0], 'white', { renderer: 'canvas' }).setOption(options[ele])
                            // $.ajax({
                            //     type:'GET',
                            //     dataType:'json',
                            //     url:'http://127.0.0.1:8337/chart?chart='+ele.split('_')[1]+'&num='+ele.split('_')[0],
                            //     success: function (data){
                            //         if (ele in { '2_bar': '' }) {
                            //             data.series[0].itemStyle.normal.color = eval(data.series[0].itemStyle.normal.color);
                            //         };
                                    // ä¸»æ¡†ä½¿ç”¨ id å±æ€§è¿›è¡Œå®šä½ä¸” class ä¸­ä¸åŒ…å«chartå±æ€§(åé¢å•ç‹¬ç”»å›¾)
                                    // åœ¨è¿›è¡Œå†…å®¹çš„æ·»åŠ ä¸æ›´æ¢ä¹‹å‰éœ€è¦è¿›è¡Œå†…å®¹æ¸…é™¤ï¼Œä¸ç„¶echartsçš„optionä¼šé‡å ï¼Œå›¾ä¼šå˜å¾—å¾ˆå¥‡æ€ª
                            //         echarts.init($('#main')[0]).clear();
                            //         echarts.init($('#main')[0], 'white', { renderer: 'canvas' }).setOption(data)
                            //     }
                            // })
                        });
                    }else{
                        // console.log($('canvas').length);
                    }
                }
            )
        })
        // è¯·æ±‚mainä¸»æ¡†çš„é»˜è®¤å›¾æ ‡
        var defaultMainChart = getChartClass($('.chart')[0].getAttribute('class'));
        $.get(
            'http://127.0.0.1:8337/chart',
            {
                chart:'map',
                num:1,
            },
            function(data){
                echarts.init($('#main')[0], 'white', { render: 'canvas' }).setOption(data);
            },
            'json', 
            )



        // è‡ªåŠ¨åŒ–è®¾ç½®èŒä¸šé€‰æ¡†çš„é«˜åº¦ä¸å­—å±…ä¸­
        var hei=parseInt($('.select').css('height'));
        var sel_anum= $('.select a').length;
        $('.select a').css({'height':hei/sel_anum,'line-height': String(hei / sel_anum) + 'px'});


        // èŒä¸šé€‰æ¡†çš„éšè—ä¸ç‚¹å‡»æ˜¾ç¤º
        $('.select').fadeOut(0.1);
        $('#select').click(function(){
            $('.select').fadeToggle('fast');
        });



    </script>
</body>
</html>